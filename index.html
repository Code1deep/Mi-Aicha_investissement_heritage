<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Rendement de l'Héritage de Mima Mi-aicha</title>
    <style>
        :root {
            --primary: #3498db; /* Bleu */
            --secondary: #2ecc71; /* Vert */
            --accent: #e74c3c; /* Rouge */
            --purple: #800476; /* Violet */
            --dark: #2c3e50;
            --light: #ecf0f1;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #f5f7fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Styles des titres colorés */
        .title-blue {
            color: var(--primary);
            text-align: center;
            margin: 30px 0;
            font-size: 2.2rem;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
        }
        
        .title-red {
            color: var(--accent);
            text-align: center;
            margin: 30px 0;
            font-size: 2rem;
            border-left: 5px solid var(--accent);
            padding-left: 20px;
        }
        
        .title-green {
            color: var(--purple);
            text-align: right;
            margin: 30px 0;
            font-size: 1.8rem;
            border-right: 5px solid var(--secondary);
            padding-right: 20px;
            direction: rtl;
            font-family: 'Arial Arabic', Arial, sans-serif;
        }
        
        .content-box {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }
        
        .calculator {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        input[type="number"], select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="number"]:focus, select:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            display: block;
            margin: 25px auto;
            width: 100%;
            max-width: 300px;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .results {
            margin-top: 30px;
            display: none;
        }
        
        .tabs {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 20px;
            gap: 5px;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            background-color: #eee;
            border-radius: 6px 6px 0 0;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .tab.active {
            background-color: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 0 6px 6px 6px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .tab-content.active {
            display: block;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .summary-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-left: 4px solid var(--primary);
        }
        
        .summary-card h3 {
            margin-top: 0;
            color: var(--dark);
        }
        
        .highlight {
            font-weight: bold;
            color: var(--accent);
        }
        
        .chart-container {
            width: 100%;
            height: 400px;
            margin: 30px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 14px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: var(--primary);
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .milestone {
            background-color: #f8f9fa;
            border-left: 4px solid var(--secondary);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 6px 6px 0;
        }
        
        .positive {
            color: var(--secondary);
        }
        
        .negative {
            color: var(--accent);
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-group {
                min-width: 100%;
            }
            
            .summary-grid {
                grid-template-columns: 1fr;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
            
            .title-blue, 
            .title-red, 
            .title-green {
                font-size: 1.4rem;
                text-align: center;
                border: none;
                padding: 0;
                direction: ltr;
            }
            
            .content-box {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="content-box">
            <h1 class="title-blue">Calculateur de Rendement de l'Heritage de Mima Mi-aicha déjà Investi</h1>
        </div>
        
        <div class="content-box">
            <h1 class="title-red">Mima Mi-aicha déjà Investi la totalité de son heritage pour notre bien-être</h1>
        </div>
        
        <div class="content-box">
            <h1 class="title-green">الشريفة مي عائشة الحنونة كنز لا يقدر بثمن، ووالدتنا المحبوبة في السماء، بتضحيتها المطلقة، قد جسّدت جوهر الحب الأمومي. لقد تصرفت وفقًا للمثل الذي يقول: "من يزرع الحب يحصد الحنان." لقد زرعت كل ميراثها، ليس لنفسها، بل لأولاد السي المعطي، حتى ننعموا بثروات مادية متنوعة. وبدون أدنى قدر من الأنانية، لم تحتفظ بشيء لراحتها الخاصة، ولا حتى بقطعة حلوى بسيطة لجوعها، ولا بزوج من الجوارب أو سترة لتحميها من لسعات برد الشتاء. إيثارها درسٌ في الحياة محفورٌ في قلوب الحامدين الشاكرين الطائعين، يبرهن أن "قلب الأم هو هوةٌ في قاعها دائمًا التضحية." ولكن أبعد من التضحية، يوجد فيه أيضًا حب لا ينتهي وعطاء يتجاوز كل مقياس. كيف لا نشهد لها بالامتنان الأبدي على مثل هذا الفعل، وهي التي جعلت رفاهيتنا ثروتها الوحيدة؟</h1>
        </div>

        <div class="calculator">
            <div class="form-row">
                <div class="form-group">
                    <label for="property_type">Type d'Appartement:</label>
                    <select id="property_type">
                        <option value="custom">Personnalisé</option>
                        <option value="economique" data-value="250000" data-rent="2500">Économique (250k MAD - 2500 MAD)</option>
                        <option value="moyen" data-value="500000" data-rent="5000">Moyen (500k MAD - 5000 MAD)</option>
                        <option value="haut_standing" data-value="1000000" data-rent="10000">Haut standing (1M MAD - 10k MAD)</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="capital">Capital Investi (MAD):</label>
                    <input type="number" id="capital" placeholder="Ex: 300000" min="1000" step="1000">
                </div>
                
                <div class="form-group">
                    <label for="monthly_rent">Loyer Mensuel (MAD):</label>
                    <input type="number" id="monthly_rent" placeholder="Ex: 2500" min="100" step="50">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="calculation_type">Type de Calcul:</label>
                    <select id="calculation_type">
                        <option value="custom">Personnalisé</option>
                        <option value="1year">1 an</option>
                        <option value="5years">5 ans</option>
                        <option value="10years">10 ans</option>
                        <option value="15years">15 ans</option>
                        <option value="20years">20 ans</option>
                        <option value="25years">25 ans</option>
                        <option value="30years">30 ans</option>
                        <option value="35years">35 ans</option>
                        <option value="40years">40 ans</option>
                        <option value="45years">45 ans</option>
                        <option value="50years">50 ans</option>
                        <option value="55years">55 ans</option>
                        <option value="60years">60 ans</option>
                    </select>
                </div>
                
                <div class="form-group" id="days_group">
                    <label for="days">Nombre de Jours:</label>
                    <input type="number" id="days" placeholder="Ex: 365" min="1" max="36500">
                </div>
            </div>
            
            <button id="calculate-btn">
                <span class="icon">📈</span> Calculer le Rendement
            </button>
        </div>
        
        <div class="results" id="results">
            <div class="tabs">
                <div class="tab active" data-tab="summary">Résumé</div>
                <div class="tab" data-tab="details">Détails</div>
                <div class="tab" data-tab="milestones">Étapes Clés</div>
            </div>
            
            <div id="summary" class="tab-content active">
                <h2>Résumé du Projet</h2>
                <div class="summary-grid" id="summary-content"></div>
                
                <h2>Évolution du Capital</h2>
                <div class="chart-container">
                    <canvas id="chart"></canvas>
                </div>
            </div>
            
            <div id="details" class="tab-content">
                <h2>Détails Journaliers</h2>
                <div style="overflow-x: auto;">
                    <table id="results-table">
                        <thead>
                            <tr>
                                <th>Jour</th>
                                <th>Capital (MAD)</th>
                                <th>Gain Quotidien (MAD)</th>
                                <th>Nouveau Capital (MAD)</th>
                            </tr>
                        </thead>
                        <tbody id="results-body"></tbody>
                    </table>
                </div>
            </div>
            
            <div id="milestones" class="tab-content">
                <h2>Étapes Clés de l'Investissement</h2>
                <div id="milestones-content"></div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let chart = null;
            let milestones = []; // Déclaration de la variable milestones
            
            // Gestion du type de propriété
            document.getElementById('property_type').addEventListener('change', function() {
                if (this.value !== 'custom') {
                    const selectedOption = this.options[this.selectedIndex];
                    const propertyValue = selectedOption.getAttribute('data-value');
                    const propertyRent = selectedOption.getAttribute('data-rent');
                    
                    document.getElementById('capital').value = propertyValue;
                    document.getElementById('monthly_rent').value = propertyRent;
                }
            });
            
            // Permettre la modification manuelle même après sélection d'un type
            document.getElementById('capital').addEventListener('input', function() {
                document.getElementById('property_type').value = 'custom';
            });
            
            document.getElementById('monthly_rent').addEventListener('input', function() {
                document.getElementById('property_type').value = 'custom';
            });
            
            // Gestion des onglets
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            function switchTab(tabId) {
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                document.getElementById(tabId).classList.add('active');
                document.querySelector(`.tab[data-tab="${tabId}"]`).classList.add('active');
            }
            
            // Gestion du type de calcul
            document.getElementById('calculation_type').addEventListener('change', function() {
                const daysGroup = document.getElementById('days_group');
                if (this.value === 'custom') {
                    daysGroup.style.display = 'block';
                    document.getElementById('days').value = '';
                } else {
                    daysGroup.style.display = 'none';
                }
            });
            
            // Bouton de calcul
            document.getElementById('calculate-btn').addEventListener('click', calculate);
            
            // Fonction principale de calcul
            function calculate() {
                const capitalInput = document.getElementById('capital').value;
                const rentInput = document.getElementById('monthly_rent').value;
                
                // Validation des entrées
                if (!capitalInput || !rentInput) {
                    alert("Veuillez saisir le capital et le loyer mensuel");
                    return;
                }
                
                const initialCapital = parseFloat(capitalInput);
                const monthlyRent = parseFloat(rentInput);
                const calculationType = document.getElementById('calculation_type').value;
                
                // Déterminer le nombre de jours
                let days;
                switch(calculationType) {
                    case '1year': days = 365; break;
                    case '5years': days = 5 * 365; break;
                    case '10years': days = 10 * 365; break;
                    case '15years': days = 15 * 365; break;
                    case '20years': days = 20 * 365; break;
                    case '25years': days = 25 * 365; break;
                    case '30years': days = 30 * 365; break;
                    case '35years': days = 35 * 365; break;
                    case '40years': days = 40 * 365; break;
                    case '45years': days = 45 * 365; break;
                    case '50years': days = 50 * 365; break;
                    case '55years': days = 55 * 365; break;
                    case '60years': days = 60 * 365; break;
                    default: days = parseInt(document.getElementById('days').value) || 365;
                }
                
                // Calcul du rendement quotidien (basé sur le loyer mensuel)
                const dailyReturn = monthlyRent / 30; // Gain quotidien fixe basé sur le loyer
                const dailyReturnRate = dailyReturn / initialCapital;
                const annualReturnRate = dailyReturnRate * 365;
                
                // Variables de calcul
                let currentCapital = initialCapital;
                let totalReturn = 0;
                let html = '';
                let milestonesHtml = '';
                const capitalData = [];
                const labels = [];
                milestones = []; // Réinitialisation des milestones
                
                // Points d'étape (tous les 5 ans jusqu'à 60 ans)
                const milestoneIntervals = [];
                for (let y = 0; y <= 60; y += 5) {
                    milestoneIntervals.push(y * 365);
                }
                
                // Simulation jour par jour
                for (let day = 1; day <= days; day++) {
                    const newCapital = currentCapital + dailyReturn;
                    
                    // Enregistrement des données pour le graphique
                    if (day === 1 || day % 30 === 0 || day === days) {
                        capitalData.push(currentCapital);
                        labels.push(day === days ? `${days}j (${Math.floor(days/365)}a)` : `J${day}`);
                    }
                    
                    // Vérification des étapes clés
                    if (milestoneIntervals.includes(day)) {
                        milestones.push({
                            day: day,
                            capital: currentCapital,
                            dailyReturn: dailyReturn,
                            years: Math.floor(day / 365)
                        });
                    }
                    
                    // Ajout des données journalières (limité aux 365 premiers jours)
                    if (days <= 365 || day <= 365) {
                        const isMilestone = day % 365 === 0;
                        html += `
                            <tr ${isMilestone ? 'class="highlight"' : ''}>
                                <td>${day}</td>
                                <td>${currentCapital.toLocaleString('fr-FR', {minimumFractionDigits: 2})}</td>
                                <td class="positive">+${dailyReturn.toLocaleString('fr-FR', {minimumFractionDigits: 2})}</td>
                                <td>${newCapital.toLocaleString('fr-FR', {minimumFractionDigits: 2})}</td>
                            </tr>
                        `;
                    }
                    
                    totalReturn += dailyReturn;
                    currentCapital = newCapital;
                }
                
                // Génération du résumé
                const totalYears = days / 365;
                const finalCapital = currentCapital;
                const totalGain = finalCapital - initialCapital;
                const multiplier = finalCapital / initialCapital;
                
                const summaryHTML = `
                    <div class="summary-card">
                        <h3>Investissement Initial</h3>
                        <p>${initialCapital.toLocaleString('fr-FR', {minimumFractionDigits: 2})} MAD</p>
                    </div>
                    <div class="summary-card">
                        <h3>Capital Final</h3>
                        <p class="highlight">${finalCapital.toLocaleString('fr-FR', {minimumFractionDigits: 2})} MAD</p>
                    </div>
                    <div class="summary-card">
                        <h3>Gains Totaux</h3>
                        <p class="positive">+${totalGain.toLocaleString('fr-FR', {minimumFractionDigits: 2})} MAD</p>
                    </div>
                    <div class="summary-card">
                        <h3>Multiplicateur</h3>
                        <p>${multiplier.toFixed(2)}x</p>
                    </div>
                    <div class="summary-card">
                        <h3>Rendement Quotidien</h3>
                        <p>${(dailyReturnRate * 100).toFixed(4)}%</p>
                    </div>
                    <div class="summary-card">
                        <h3>Rendement Annuel</h3>
                        <p>${(annualReturnRate * 100).toFixed(2)}%</p>
                    </div>
                    <div class="summary-card">
                        <h3>Durée</h3>
                        <p>${days} jours (${totalYears.toFixed(1)} ans)</p>
                    </div>
                    <div class="summary-card">
                        <h3>Gain Moyen/Jour</h3>
                        <p>${(totalGain / days).toLocaleString('fr-FR', {minimumFractionDigits: 2})} MAD</p>
                    </div>
                `;
                
                // Génération des étapes clés
                milestones.forEach(ms => {
                    if (ms.day <= days) {
                        milestonesHtml += `
                            <div class="milestone">
                                <h3>Après ${ms.years} an${ms.years > 1 ? 's' : ''} (${ms.day} jours)</h3>
                                <p><strong>Capital:</strong> ${ms.capital.toLocaleString('fr-FR', {minimumFractionDigits: 2})} MAD</p>
                                <p><strong>Gain quotidien:</strong> <span class="positive">${ms.dailyReturn.toLocaleString('fr-FR', {minimumFractionDigits: 2})} MAD</span></p>
                                <p><strong>Gain annuel:</strong> <span class="positive">${(ms.dailyReturn * 365).toLocaleString('fr-FR', {minimumFractionDigits: 2})} MAD</span></p>
                            </div>
                        `;
                    }
                });
                
                // Mise à jour de l'interface
                document.getElementById('summary-content').innerHTML = summaryHTML;
                document.getElementById('results-body').innerHTML = html;
                document.getElementById('milestones-content').innerHTML = milestonesHtml;
                document.getElementById('results').style.display = 'block';
                
                // Création du graphique
                createChart(labels, capitalData, days);
                
                // Défilement vers les résultats
                document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            }
            
            // Création du graphique
            function createChart(labels, data, days) {
                const ctx = document.getElementById('chart').getContext('2d');
                
                if (chart) chart.destroy();
                
                chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: `Évolution sur ${days} jours (${Math.floor(days/365)} ans)`,
                            data: data,
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            borderWidth: 2,
                            tension: 0.1,
                            fill: true,
                            pointBackgroundColor: '#2ecc71',
                            pointRadius: 3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': ' + context.parsed.y.toLocaleString('fr-FR') + ' MAD';
                                    }
                                }
                            },
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                ticks: {
                                    callback: function(value) {
                                        return value.toLocaleString('fr-FR') + ' MAD';
                                    }
                                },
                                grid: {
                                    color: 'rgba(0,0,0,0.05)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>
